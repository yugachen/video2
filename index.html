<script>
const scriptURL = "你的 Script URL"; // 換成你的 Apps Script 部署網址
let currentID = null;

async function init() {
  try {
    const res = await fetch(scriptURL);
    const json = await res.json();
    currentID = json.nextVideoID || 1;
  } catch {
    currentID = 1;
  }
  document.getElementById("studentID").innerText = `學生編號：${currentID}`;
}
const video = document.getElementById('myVideo');
video.addEventListener('pause', () => {
  document.getElementById("sound").play();
  const timestamp = video.currentTime.toFixed(2) + "秒";
  fetch(scriptURL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      id: currentID,
      description: "影片暫停於 " + timestamp,
      time: new Date().toISOString()
    })
  })
  .then(() => {
    currentID++;
    document.getElementById("studentID").innerText = `學生編號：${currentID}`;
  })
  .catch(() => {
    alert("上傳失敗，請稍後重試！");
  });
});
init();
</script>
